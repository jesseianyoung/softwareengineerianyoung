<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Magical Suprise Monthsary</title>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
    <style>
        /* Body & background */
        html, body {
            margin: 0;
            padding: 0;
            font-family: 'Montserrat', sans-serif;
            background: linear-gradient(-45deg, #4a2c5e, #8c4f7d, #9b5491, #d16ba5);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            color: #fff;
            text-align: center;
            min-height: 100%;
            overflow-x: hidden;
            overflow-y: auto; /* allow scrolling */
        }
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Container */
        .container {
            position: relative;
            background: rgba(0,0,0,0.5);
            padding: 20px;
            border-radius: 20px;
            backdrop-filter: blur(5px);
            max-width: 450px;
            width: 90%;
            margin: 100px auto;
            z-index: 1;
        }

        h1 {
            font-family: 'Great Vibes', cursive;
            font-size: 2.8rem;
            margin-bottom: 20px;
            letter-spacing: 2px;
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            background: linear-gradient(45deg, #9b4d9b, #8c3f7d);
            color: white;
            transition: 0.3s;
            margin-top: 10px;
            z-index: 5;
            position: relative;
        }
        button:hover { transform: scale(1.05); background: linear-gradient(45deg, #8c3f7d, #9b4d9b); }

        /* Portrait */
        .portrait-container {
            position: relative;
            width: 100%;
            max-width: 250px;
            margin: 0 auto 24px;
        }
        .portrait {
            width: 100%;
            border-radius: 20px;
            overflow: hidden;
            position: relative;
            animation: float 6s ease-in-out infinite, glowPulse 3s ease-in-out infinite;
            box-shadow: 0 0 25px rgba(255,182,193,0.7), 0 0 50px rgba(255,105,180,0.5), 0 0 75px rgba(255,182,193,0.4);
            background: linear-gradient(135deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
            transition: box-shadow 1.5s ease-in-out;
        }
        .portrait img { width: 100%; height: auto; display: block; border-radius: 20px; object-fit: cover; }
        .portrait::after {
            content: '';
            position: absolute; top: -40%; left: -60%; width: 220%; height: 220%;
            background: linear-gradient(120deg, rgba(255,255,255,0) 30%, rgba(255,255,255,0.3) 50%, rgba(255,255,255,0) 70%);
            transform: rotate(25deg);
            animation: shimmerMove 4s linear infinite;
            pointer-events:none;
            border-radius:20px;
            z-index:2;
        }

        @keyframes float {0%{transform:translateY(0px);}50%{transform:translateY(-15px);}100%{transform:translateY(0px);} }
        @keyframes glowPulse {0%,100%{box-shadow:0 0 25px rgba(255,182,193,0.7),0 0 50px rgba(255,105,180,0.5),0 0 75px rgba(255,182,193,0.4);}50%{box-shadow:0 0 35px rgba(255,182,193,0.9),0 0 60px rgba(255,105,180,0.7),0 0 90px rgba(255,182,193,0.6);} }
        @keyframes shimmerMove {0%{transform:translateX(-100%) rotate(25deg);}100%{transform:translateX(100%) rotate(25deg);} }

        /* Hearts */
        .heart {
            position:absolute;
            font-size:2rem;
            z-index:4;
            animation-name:heartAnimation;
            animation-timing-function:ease-in;
            animation-iteration-count: infinite;
            opacity:0;
            text-shadow: 0 0 10px rgba(255,182,193,0.8);
        }
        @keyframes heartAnimation {0%{transform:scale(0) translateY(0); opacity:0;}50%{transform:scale(1.2) translateY(-200px); opacity:0.7;}100%{transform:scale(0) translateY(-400px); opacity:0;}}

        /* Butterfly */
        .butterfly_wrapper { width: 60px; height: 60px; position: absolute; z-index: 3; }
        .leftwings,.rightwings { position:absolute; width:50%; height:100%; top:0; }
        .leftwings { left:0; } .rightwings { right:0; }
        .perspective { position: relative; width:100%; height:50%; perspective:150px; perspective-origin:50% 50%; }
        .upperwing,.lowerwing {
            background: radial-gradient(ellipse at center, #a64ac9 0%, #6b2a8d 100%);
            animation-duration: 0.3s; animation-iteration-count: infinite; animation-direction: alternate;
            position:absolute; width:100%; height:100%;
        }
        .upperwing_left { border-top-left-radius:10%; border-top-right-radius:80%; border-bottom-right-radius:0%; border-bottom-left-radius:30%; transform-origin:100% 50%; animation-name:movewing_left;}
        .upperwing_right{border-top-left-radius:80%; border-top-right-radius:10%; border-bottom-right-radius:30%; border-bottom-left-radius:0%; transform-origin:0% 50%; animation-name:movewing_right;}
        .lowerwing_left{right:0; border-top-left-radius:30%; border-top-right-radius:0%; border-bottom-right-radius:80%; border-bottom-left-radius:10%; transform-origin:100% 50%; animation-name:movewing_left;}
        .lowerwing_right{left:0; border-top-left-radius:0%; border-top-right-radius:30%; border-bottom-right-radius:10%; border-bottom-left-radius:80%; transform-origin:0% 50%; animation-name:movewing_right;}
        @keyframes movewing_left{from{transform:rotateY(0deg);}to{transform:rotateY(65deg);} }
        @keyframes movewing_right{from{transform:rotateY(0deg);}to{transform:rotateY(-65deg);} }

        @media(max-width:500px){
            .butterfly_wrapper { width:40px; height:40px; }
            .container { margin: 50px auto; padding: 15px; }
            h1 { font-size: 2rem; }
            button { padding: 10px 20px; font-size: 0.9rem; }
        }

        canvas { position: absolute; top:0; left:0; width:100%; pointer-events:none; z-index:2; }
    </style>
</head>
<body>

<div class="container">
    <h1>Happy 8th Monthsary! 💖</h1>
    <div class="portrait-container">
        <div class="portrait">
            <img src="../../images/AugustMonthsary2025Pic5.jpg" alt="Couple smiling together during August monthsary celebration">
        </div>
    </div>
    <button id="playPauseButton">Pause Sound</button>
</div>

<audio id="backgroundSound" preload="auto" loop>
    <source src="../../music/august2025/Piano_N.mp3" type="audio/mp3">
    <source src="../../music/august2025/Yiruma_Maybe.mp3" type="audio/mp3">
</audio>

<canvas id="sparkleCanvas"></canvas>

<script>
    /* MUSIC */
    const sound = document.getElementById("backgroundSound");
    const playPauseButton = document.getElementById("playPauseButton");
    // Get all source elements
    const sources = sound.querySelectorAll("source");
    let currentTrack = 0;

    // Load the first source
    sound.src = sources[currentTrack].src;
    sound.loop = false; // We'll handle looping manually
    window.addEventListener("load", () => {
        sound.muted = true;
        sound.play().catch(()=>{});
        setTimeout(()=>{ sound.muted = false; }, 100);
        playPauseButton.textContent = "Pause Sound";
    });
    // When track ends, switch to the next one
    sound.addEventListener("ended", () => {
    currentTrack = (currentTrack + 1) % sources.length;
    sound.src = sources[currentTrack].src;
    sound.play().catch(() => {});
    });
    playPauseButton.addEventListener("click", () => {
        if(sound.paused){ sound.play().catch(()=>{}); playPauseButton.textContent="Pause Sound"; }
        else{ sound.pause(); playPauseButton.textContent="Play Sound"; }
    });

    /* FLOATING HEARTS */
    function spawnHeart() {
        const heart = document.createElement("div");
        heart.className = "heart";
        heart.innerText = "❤️";
        heart.style.left = Math.random() * window.innerWidth + "px";
        heart.style.top = window.innerHeight + "px"; // start from bottom
        heart.style.animationDuration = (5 + Math.random()*5) + "s";
        document.body.appendChild(heart);
        setTimeout(() => heart.remove(), 10000);
    }
    setInterval(spawnHeart, 500);

    /* BUTTERFLY & SPARKLE TRAIL */
    const canvas = document.getElementById('sparkleCanvas');
    const ctx = canvas.getContext('2d');

    function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = Math.max(document.body.scrollHeight, window.innerHeight);
    }
    window.addEventListener('resize', resizeCanvas);
    window.addEventListener('scroll', resizeCanvas);
    resizeCanvas();

    function randomColor() {
        const colors = ['#b57edc','#8c4fa3','#c98cf3','#d3a1f5','#b084d1','#e0b0ff'];
        return colors[Math.floor(Math.random()*colors.length)];
    }

    class Butterfly {
        constructor(offset=0){
            this.wrapper=document.createElement("div");
            this.wrapper.classList.add("butterfly_wrapper");
            this.wrapper.innerHTML=`
                <div class="leftwings">
                    <div class="perspective"><div class="upperwing upperwing_left"></div></div>
                    <div class="perspective"><div class="lowerwing lowerwing_left"></div></div>
                </div>
                <div class="rightwings">
                    <div class="perspective"><div class="upperwing upperwing_right"></div></div>
                    <div class="perspective"><div class="lowerwing lowerwing_right"></div></div>
                </div>
            `;
            document.body.appendChild(this.wrapper);
            this.t = offset;
            this.trail=[]; this.trailColors=[]; this.trailSizes=[]; this.trailOpacities=[];
        }
        update(){
            this.t += 0.02;
            const pos = this.heartPath(this.t);
            this.wrapper.style.left = pos.x + "px";
            this.wrapper.style.top = pos.y + "px";
            this.trail.push({x:pos.x, y:pos.y});
            this.trailColors.push(randomColor());
            this.trailSizes.push(Math.random()*3+2);
            this.trailOpacities.push(Math.random()*0.3+0.4);
            if(this.trail.length>30){
                this.trail.shift(); this.trailColors.shift(); this.trailSizes.shift(); this.trailOpacities.shift();
            }
        }
        heartPath(t){
            const scale = window.innerWidth < 500 ? 8 : 12;
            const offsetX = window.innerWidth/2;
            const offsetY = document.body.scrollHeight/2;
            const x = scale*16*Math.pow(Math.sin(t),3) + offsetX;
            const y = -scale*(13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t)) + offsetY/2;
            return {x,y};
        }
    }

    const butterflies = [];
    for(let i=0;i<4;i++){ butterflies.push(new Butterfly(Math.random()*Math.PI*2)); }

    function animateAll(){
        ctx.clearRect(0,0,canvas.width,canvas.height);
        butterflies.forEach(b => {
            b.update();
            b.trail.forEach((p,i)=>{
                ctx.save();
                ctx.globalAlpha = b.trailOpacities[i]*(i/b.trail.length);
                ctx.fillStyle = b.trailColors[i];
                ctx.shadowColor = b.trailColors[i];
                ctx.shadowBlur = 15;
                ctx.beginPath();
                ctx.arc(p.x,p.y,b.trailSizes[i],0,Math.PI*2);
                ctx.fill();
                ctx.restore();
            });
        });
        requestAnimationFrame(animateAll);
    }
    animateAll();
</script>

</body>
</html>